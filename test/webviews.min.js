var akademy=akademy||{};akademy.webviews=akademy.webviews||function(e){var t=document,o={views:[{url:"http://wouldlike.gift",title:"loaded but restricted"},{url:"http://blog.akademy.co.uk/2017/04/webviews-seeing-all-your-website/"},{url:"https://bitbucket.org/akademy/webviews",title:"3 Embed Not Allowed",openFull:!0},{url:"httpf://error.example.com",title:"4 Error Bad schema"},{url:"http://!$&'()*+,;=.com",title:"Error Bad URL"},{url:"http://qweetergfsadgdvvbboisfgergerhjokjnmtn.com",title:"Unknown website"},{url:"http:/local",title:"Text found",textCheck:"Not Found"},{url:"http://127.0.0.1",title:"OK"}],width:206,height:136,scale:.2,element:t.body,autoReload:0},i={w:(e=e||{}).width||o.width,h:e.height||o.height},r=e.scale||o.scale,a={w:i.w*(1/r),h:i.h*(1/r)},n=e.element||o.element,l=e.views||o.views,d=e.autoReload||o.autoReload,s={w:4*i.w,h:4*i.h},c={w:window.innerWidth||t.body.clientWidth,h:window.innerHeight||t.body.clientHeight};s.w>c.w&&(s.w=c.w-120),s.h>c.h&&(s.h=c.h-50),window.addEventListener("message",function(e){console.log("A window message:",e)},!1),window.addEventListener("load",function(){function e(e,t,o){e.setAttribute(t,o)}function o(e){return t.createElement(e)}function c(e){return t.createTextNode(e)}function h(e,t){e.appendChild(t)}function u(e,t){e.replaceChild(c("⌕ zoom"),t),e.classList.add("hide")}function p(t){t.status="loading",this.parentNode.classList.add("loading");try{e(this,"src",t.url)}catch(e){this.parentNode.classList.add("loaded-restricted")}}function b(e){if("loading"===e.status){var t=this.parentNode;t.classList.remove("loading"),e.status="loaded";try{var o=this.contentWindow||this.contentDocument;if(o.document&&(o=o.document),o.implementation&&o.body&&o.body.innerText&&0!==o.body.childElementCount?e.textCheck&&""!==e.textCheck&&-1===o.body.innerText.indexOf(e.textCheck)?t.classList.add("loaded-errored"):t.classList.add("loaded-ok"):t.classList.add("loaded-errored"),e.autoReload>0||d>0){var i=d;e.autoReload>0&&(i=e.autoReload),i>0&&x(this,e,1e3*i)}}catch(e){t.classList.add("loaded-restricted")}}}function w(e){e.status="errored",this.parentNode.classList.add("error")}function m(e){return v(e),!1}function f(e){k(e)}function g(e,t){x(e,t)}function x(e,t,o){t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(p.bind(e,t),o||50)}function v(t){t.parentNode.classList.add("full"),e(t,"scrolling","yes")}function k(t){t.parentNode.classList.remove("full"),e(t,"scrolling","no")}var y=o("style"),L=" .iframe-wrap";y.appendChild(c(" .iframe-wrap, iframe-wrap * {box-sizing:content-box !important;} .iframe-wrap *.hide {display:block !important;} .iframe-wrap {width:"+i.w+"px;height:"+(i.h+25)+"px;padding:0;margin:0;display:inline-block;background-color:white;margin:5px;border:3px solid black}"+L+".full {position:absolute;top:20px;left:20px;border:0}"+L+".loading { border-color: blue; }"+L+".loaded-ok { border-color: limegreen; }"+L+".loaded-restricted { border-color: #e5d610; }"+L+".loaded-errored { border-color: red; }"+L+".error { border-color: #f55; }"+L+" a {width:"+i.w+"px;height:"+i.h+"px;padding:0;margin:0;display:block;position:absolute;background-color:transparent;text-align:center;font-size:20px;font-weight:bold;cursor:hand;margin-top:0}"+L+" a:hover {background-color: rgba(0,0,0,0.5);color:white;}"+L+" a.hide {color: transparent }"+L+" a:hover.hide {color: white }"+L+" p {position:relative; color:black; top:"+i.h+"px; margin:4px 4px;}"+L+" button {visibility:hidden;z-index:200;width:59px;background-color:rgb(239, 240, 241);border:1px;}"+L+" .buttons {margin-top:-18px;}"+L+".full .buttons {margin-top:0;left:"+(s.w-118)+"px;position:relative;}"+L+".full button {visibility:visible;}"+L+".full a:hover, .iframe-wrap.full a:hover.hide {background-color: rgba(0,0,0,0);color:transparent;}"+L+" iframe {width:"+a.w+"px;height:"+a.h+"px;transform: scale("+r+"); position:absolute; transform-origin:0 0; overflow:hidden; background-color:white; border-color:black;margin-top:0px}"+L+".full iframe {width:"+s.w+";height:"+s.h+"px;transform: scale(1);z-index:100;overflow:auto;margin-top:0px}"+L+".loading iframe { /*display:none*/ }"+L+".loaded iframe { /*display:block*/ }")),n.appendChild(y);for(var N=0;N<l.length;N++){var C=l[N];C.status="none",C.title||(C.title="No title. (Webview"+(N+1)+")");var E=o("div"),R=o("div"),T=o("iframe"),z=o("a"),W=c(C.title),A=o("p"),F=c(C.title),j=o("br"),B=o("button"),H=c("✕"),O=o("button"),U=c("↻");e(E,"class","iframe-wrap"),e(E,"id","iframe-wrap-"+N),e(R,"class","buttons"),e(T,"src",""),e(T,"scrolling","no"),e(T,"seamless","seamless"),e(T,"id","iframe-"+N),T.onload=b.bind(T,C),T.onerror=w.bind(T,C),e(z,"href",C.url),e(z,"target","_blank"),e(z,"alt",C.title+" : "+C.url),C.openFull||(z.onclick=m.bind(z,T)),e(B,"id","close"),B.onclick=f.bind(B,T),e(O,"id","refresh"),O.onclick=g.bind(O,T,C),h(B,H),h(O,U),h(R,B),h(R,O),h(z,j),h(z,W),h(A,F),h(E,R),h(E,T),h(E,z),h(E,A),h(n,E),x(T,C,50*(N+1)),setTimeout(u.bind(this,z,W),2500)}},!1)},(akademy=akademy||{}).webviews=akademy.webviews||function(e){var t=document,o={views:[{url:"http://wouldlike.gift",title:"loaded but restricted"},{url:"http://blog.akademy.co.uk/2017/04/webviews-seeing-all-your-website/"},{url:"https://bitbucket.org/akademy/webviews",title:"Embed Not Allowed",openFull:!0},{url:"httpf://error.example.com",title:"Error Bad schema"},{url:"http://!$&'()*+,;=.com",title:"Error Bad URL"},{url:"http://qweetergfsadgdvvbboisfgergerhjokjnmtn.com",title:"Unknown website"},{url:"http:/local",title:"Text found",textCheck:"Not Found"},{url:"http://127.0.0.1",title:"OK",sandbox:["allow-forms"]}],width:206,height:136,scale:.2,element:t.body,autoReload:0},i={w:(e=e||{}).width||o.width,h:e.height||o.height},r=e.scale||o.scale,a={w:i.w*(1/r),h:i.h*(1/r)},n=e.element||o.element,l=e.views||o.views,d=e.autoReload||o.autoReload,s={w:4*i.w,h:4*i.h},c={w:window.innerWidth||t.body.clientWidth,h:window.innerHeight||t.body.clientHeight};s.w>c.w&&(s.w=c.w-120),s.h>c.h&&(s.h=c.h-50),window.addEventListener("message",function(e){console.log("A window message:",e)},!1),window.addEventListener("load",function(){function e(e,t,o){e.setAttribute(t,o)}function o(e){return t.createElement(e)}function c(e){return t.createTextNode(e)}function h(e,t){e.appendChild(t)}function u(e,t){e.replaceChild(c("⌕ zoom"),t),e.classList.add("hide")}function p(t){t.status="loading",this.parentNode.classList.add("loading");try{e(this,"src",t.url)}catch(e){this.parentNode.classList.add("loaded-restricted")}}function b(e){if("loading"===e.status){var t=this.parentNode;t.classList.remove("loading"),e.status="loaded";try{var o=this.contentWindow||this.contentDocument;if(o.document&&(o=o.document),o.implementation&&o.body&&o.body.innerText&&0!==o.body.childElementCount?e.textCheck&&""!==e.textCheck&&-1===o.body.innerText.indexOf(e.textCheck)?t.classList.add("loaded-errored"):t.classList.add("loaded-ok"):t.classList.add("loaded-errored"),e.autoReload>0||d>0){var i=d;e.autoReload>0&&(i=e.autoReload),i>0&&x(this,e,1e3*i)}}catch(e){t.classList.add("loaded-restricted")}}}function w(e){e.status="errored",this.parentNode.classList.add("error")}function m(e){return v(e),!1}function f(e){k(e)}function g(e,t){x(e,t)}function x(e,t,o){t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(p.bind(e,t),o||50)}function v(t){t.parentNode.classList.add("full"),e(t,"scrolling","auto")}function k(t){t.parentNode.classList.remove("full"),e(t,"scrolling","no")}var y=o("style"),L=" .iframe-wrap";y.appendChild(c(" .iframe-wrap, iframe-wrap * {box-sizing:content-box !important;} .iframe-wrap *.hide {display:block !important;} .iframe-wrap {width:"+i.w+"px;height:"+(i.h+25)+"px;padding:0;margin:0;display:inline-block;background-color:white;margin:5px;border:3px solid black}"+L+".full {position:absolute;top:20px;left:20px;border:0}"+L+".loading { border-color: blue; }"+L+".loaded-ok { border-color: limegreen; }"+L+".loaded-restricted { border-color: #e5d610; }"+L+".loaded-errored { border-color: red; }"+L+".error { border-color: #f55; }"+L+" a {width:"+i.w+"px;height:"+i.h+"px;padding:0;margin:0;display:block;position:absolute;background-color:transparent;text-align:center;font-size:20px;font-weight:bold;cursor:hand;margin-top:0}"+L+" a:hover {background-color: rgba(0,0,0,0.5);color:white;}"+L+" a.hide {color: transparent }"+L+" a:hover.hide {color: white }"+L+" p {position:relative; color:black; top:"+i.h+"px; margin:4px 4px;}"+L+" button {visibility:hidden;z-index:200;width:59px;background-color:rgb(239, 240, 241);border:1px;}"+L+" .buttons {margin-top:-18px;}"+L+".full .buttons {margin-top:0;left:"+(s.w-118)+"px;position:relative;}"+L+".full button {visibility:visible;}"+L+".full a:hover, .iframe-wrap.full a:hover.hide {background-color: rgba(0,0,0,0);color:transparent;}"+L+" iframe {width:"+a.w+"px;height:"+a.h+"px;transform: scale("+r+"); position:absolute; transform-origin:0 0; overflow:hidden; background-color:white; border-color:black;margin-top:0px}"+L+".full iframe {width:"+s.w+";height:"+s.h+"px;transform: scale(1);z-index:100;overflow:auto;margin-top:0px}"+L+".loading iframe { /*display:none*/ }"+L+".loaded iframe { /*display:block*/ }")),n.appendChild(y);for(var N=0;N<l.length;N++){var C=l[N];C.status="none",C.title||(C.title="No title. (Webview"+(N+1)+")");var E=o("div"),R=o("div"),T=o("iframe"),z=o("a"),W=c(C.title),A=o("p"),F=c(C.title),j=o("br"),B=o("button"),H=c("✕"),O=o("button"),U=c("↻");e(E,"class","iframe-wrap"),e(E,"id","iframe-wrap-"+N),e(R,"class","buttons"),e(T,"src",""),e(T,"scrolling","yes"),e(T,"seamless","seamless"),e(T,"id","iframe-"+N),C.sandbox&&e(T,"sandbox",C.sandbox.join(" ")),T.onload=b.bind(T,C),T.onerror=w.bind(T,C),e(z,"href",C.url),e(z,"target","_blank"),e(z,"alt",C.title+" : "+C.url),C.openFull||(z.onclick=m.bind(z,T)),e(B,"id","close"),B.onclick=f.bind(B,T),e(O,"id","refresh"),O.onclick=g.bind(O,T,C),h(B,H),h(O,U),h(R,B),h(R,O),h(z,j),h(z,W),h(A,F),h(E,R),h(E,T),h(E,z),h(E,A),h(n,E),x(T,C,50*(N+1)),setTimeout(u.bind(this,z,W),2e3)}},!1)};