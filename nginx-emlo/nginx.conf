events {}

error_log /dev/stderr debug;

http {
	proxy_cache_path /cache/ levels=1:2 keys_zone=emlo_cache:10m max_size=10g
                 inactive=60m use_temp_path=off;

	server {
		listen   80;

        location /exhibition {
            return 301 http://emlo.bodleian.ox.ac.uk/;
        }
        location / {
            return 301 http://emlo.bodleian.ox.ac.uk/;
        }

	    location /collections/ {
	        proxy_set_header X-Real-IP  $remote_addr;
	        proxy_set_header X-Forwarded-For $remote_addr;
	        proxy_set_header Host $host;
	        proxy_pass http://wp-catalogues/;
		}

        location /exhibition/baxter {
            return 301 /exhibition/baxter/;
        }
        location /exhibition/baxter/ {
            proxy_set_header X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $remote_addr;
            proxy_set_header Host $host;
            proxy_pass http://omk-baxter;
        }

        location /exhibition/sw {
            return 301 /exhibition/sw/;
        }
        location /exhibition/sw/ {
            proxy_set_header X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $remote_addr;
            proxy_set_header Host $host;
            proxy_pass http://omk-sw;
        }

        location /wemlo {
            return 301 /wemlo/;
        }
        location /wemlo/ {
            proxy_set_header X-Real-IP  $remote_addr;
            proxy_set_header X-Forwarded-For $remote_addr;
            proxy_set_header Host $host;
            proxy_pass http://omk-wemlo;
        }
	}
}